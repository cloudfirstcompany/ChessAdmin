{% extends 'base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block body_block %}
<section class='section'>
<div class='container'>
    <div class='heading'>
      <h1 class='title'>Search for Clubs</h1>
    </div>
    <br/>
    <!-- determine whether to search by name or by keywords-->
    <form method='POST' action="{% url 'suite:club_search' %}">
      {% csrf_token %}

      <div class="control is-horizontal">
           <p class="control has-icon">
                {% render_field form.keyword class="input is-fullwidth" placeholder="Club name or description" %}
                <span class="icon">
                     <i class="fa fa-search" aria-hidden="true"></i>
                </span>
           </p>
      </div>

      <input class="button control" type="submit" value="Submit" style="visibility: hidden"/>
</form>

      <div>
           <!-- generate listing of clubs in a two column table format- with odd-indexed clubs being on the
           left and even-indexed clubs being on the right -->
      {% if clubs %}
       <div class="columns">
            <div class='column is-half'>
                 {% for club in clubs.all %}
                 {% if not forloop.counter|divisibleby:"2" %}
                 <div class="box">
                      <a href="{% url 'suite:club_view' club.id %}">{{ club.club_name }}</a>
                      <img src="{{club.image.url}}" />
                      <p>{{club.club_description}}</p>
                 </div>
                 {% endif %}
                 {% endfor%}
            </div>
            <div class="column is-half">
                 {% for club in clubs.all %}
                 {% if forloop.counter|divisibleby:"2" %}
                 <div class="box">
                      <a href="{% url 'suite:club_view' club.id %}">{{ club.club_name }}</a>
                      <img src="{{club.image.url}}" />
                      <p>{{club.club_description}}</p>
                 </div>
                 {% endif %}
                 {% endfor%}
            </div>
       </div>
       {% endif %}
   </div>


   <!-- displays all the clubs -->

   <div class='heading'>
     <h1 class='title'>Here are some of the Clubs</h1>
   </div>
   <br/>

     {% if not clubs %}

   <div class="columns">
        <div class='column is-half'>
             {% for allClub in allClubs %}
             {% if not forloop.counter|divisibleby:"2" %}
             <div class="box">
                  {{ allClub.club_name }}
                  <img src="{{allClub.image.url}}" />
                  <p>{{allClub.club_description}}</p>
             </div>
             {% endif %}
             {% endfor%}
        </div>
        <div class="column is-half">
             {% for allClubs in allClubs %}
             {% if forloop.counter|divisibleby:"2" %}
             <div class="box">
              {{ allClub.club_name }}
                  <img src="{{allClub.image.url}}" />
                  <p>{{allClub.club_description}}</p>
             </div>
             {% endif %}
             {% endfor%}
        </div>
   </div>

     {% endif %}
  </div>
</section>
{% endblock body_block %}
